<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="å‘¨ç¦èŒ—åœ¨ Github ä¸Šçš„ä¸ªäººåšå®¢">
    <meta name="keyword" content="å‘¨ç¦èŒ—">
    <meta name="theme-color" content="#600090">
    <meta name="msapplication-navbutton-color" content="#600090">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090">
    <link rel="shortcut icon" href="https://gitee.com/zyyzg/blog/images/favicon.ico">
    <link rel="alternate" type="application/atom+xml" title="ChowMe" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.css">
    <title>
        
        å®ç°Vuexç²¾å‡†çš„ç±»å‹æ¨æ–­Betaç‰ˆï½œChow&#39;s blog
        
    </title>

    <link rel="canonical" href="http://localhost:4000/BeCoderQ.github.io/2021/07/19/å®ç°Vuexæœ€ç²¾å‡†çš„ç±»å‹æ¨æ–­Betaç‰ˆ/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/BeCoderQ.github.io/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/BeCoderQ.github.io/css/blog-style.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/BeCoderQ.github.io/css/syntax.css">
</head>

<style>

    header.intro-header {
        background-image: url('//o7bkkhiex.bkt.clouddn.com/lion-blur-bg.jpg')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top " id="nav-top" data-ispost = "true" data-istags="false
" data-ishome = "false" >
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated pulse" href="/BeCoderQ.github.io/">
                <span class="brand-logo">
                    ChowMe
                </span>
                's Blog
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <!-- /.navbar-collapse -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/BeCoderQ.github.io/">Home</a>
                    </li>
					
                    
                        
							
                        <li>
                            <a href="/BeCoderQ.github.io/categories/">categories</a>
                        </li>
							
						
                    
                        
							
                        <li>
                            <a href="/BeCoderQ.github.io/tags/">tags</a>
                        </li>
							
						
                    
					
					
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
//    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<!-- Main Content -->

<!--only post-->


<img class="wechat-title-img"
     src="https://gitee.com/zyyzg/blog/images/mountain.jpg">


<style>
    
    header.intro-header {
        background-image: url('https://gitee.com/zyyzg/blog/images/mountain.jpg')
    }

    
</style>

<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <div class="post-heading">
                    <h1>å®ç°Vuexç²¾å‡†çš„ç±»å‹æ¨æ–­Betaç‰ˆ</h1>
                    
                    <span class="meta">
                         ä½œè€… Chow
                        <span>
                          æ—¥æœŸ 2021-07-19
                         </span>
                    </span>
                    <div class="tags text-center">
                        
                        <a class="tag" href="/BeCoderQ.github.io/tags/#typescript"
                           title="typescript">typescript</a>
                        
                        <a class="tag" href="/BeCoderQ.github.io/tags/#vuex"
                           title="vuex">vuex</a>
                        
                        <a class="tag" href="/BeCoderQ.github.io/tags/#å¼€æº"
                           title="å¼€æº">å¼€æº</a>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="post-title-haojen">
        <span>
            å®ç°Vuexç²¾å‡†çš„ç±»å‹æ¨æ–­Betaç‰ˆ
        </span>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-1 col-sm-9 post-container">
                <h1 id="å’ŒVuexè€—ä¸Šäº†"><a href="#å’ŒVuexè€—ä¸Šäº†" class="headerlink" title="å’ŒVuexè€—ä¸Šäº†"></a>å’ŒVuexè€—ä¸Šäº†</h1><p>ä¸Šä¸€æ¬¡æˆ‘ä¹Ÿå¯¹Vuexè¿›è¡Œäº†æ¨æ–­ï¼Œä½†ç»“æœå¾ˆéš¾è®©äººæ»¡æ„: <a href="http://zyyzg.cn/2021/06/02/%E8%AE%B0%E4%B8%80%E6%AC%A1Vuex%E4%B8%ADcommit%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C%E7%9A%84%E8%BF%87%E7%A8%8B/" target="_blank" rel="noopener">http://zyyzg.cn/2021/06/02/%E8%AE%B0%E4%B8%80%E6%AC%A1Vuex%E4%B8%ADcommit%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C%E7%9A%84%E8%BF%87%E7%A8%8B/</a></p>
<p>äºæ˜¯è¿™æ¬¡è®¤çœŸæ€è€ƒäº†ä¸€ä¸‹ï¼Œæœ‰äº†ä¸€ä¸ªæ–°çš„æ–¹æ¡ˆï¼Œå¤æ‚çš„æ˜ å°„åï¼ˆæˆ‘è§‰å¾—è¿‡ç¨‹å†™å¾—å¾ˆéº»çƒ¦ï¼Œæ¯•ç«Ÿæ°´å¹³æœ‰é™ï¼‰èƒ½æ‹¿åˆ°å‹‰å¼ºæ»¡æ„çš„ç»“æœäº†ï¼š</p>
<h3 id="state"><a href="#state" class="headerlink" title="state"></a>state</h3><p><img src="/BeCoderQ.github.io/2021/07/19/å®ç°Vuexæœ€ç²¾å‡†çš„ç±»å‹æ¨æ–­Betaç‰ˆ/state.gif" alt="å›¾"></p>
<h3 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h3><p><img src="/BeCoderQ.github.io/2021/07/19/å®ç°Vuexæœ€ç²¾å‡†çš„ç±»å‹æ¨æ–­Betaç‰ˆ/commit.gif" alt="å›¾"></p>
<h3 id="dispatch"><a href="#dispatch" class="headerlink" title="dispatch"></a>dispatch</h3><p><img src="/BeCoderQ.github.io/2021/07/19/å®ç°Vuexæœ€ç²¾å‡†çš„ç±»å‹æ¨æ–­Betaç‰ˆ/dispatch.gif" alt="å›¾"></p>
<p>å¯ä»¥çœ‹åˆ°stateèƒ½å¤Ÿæ‹¿åˆ°moduleså†…çš„ï¼Œcommitå’Œdispatchèƒ½æ‹¿åˆ°å‘½åç©ºé—´keyï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå‚æ•°(payload)çš„ç±»å‹ä¹Ÿèƒ½å¤Ÿä¸ä¹‹å¯¹åº”ã€‚</p>
<h3 id="store-index-tsæ–‡ä»¶"><a href="#store-index-tsæ–‡ä»¶" class="headerlink" title="store/index.tsæ–‡ä»¶"></a>store/index.tsæ–‡ä»¶</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex, &#123; Commit &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">import</span> &#123; isOwnKey, NonNeverState, GetState, GetMutationKeyParamMap, GetActionKeyParamMap &#125; <span class="keyword">from</span> <span class="string">"vuex-with-type"</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  token: <span class="string">""</span>,</span><br><span class="line">  openId: <span class="string">""</span>,</span><br><span class="line">  name: <span class="string">""</span>,</span><br><span class="line">  appId: <span class="string">"1"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** modulesæµ‹è¯• */</span></span><br><span class="line"><span class="keyword">const</span> modOneState = &#123;</span><br><span class="line">  name: <span class="string">"z"</span>,</span><br><span class="line">  age: <span class="number">24</span>,</span><br><span class="line">  job: <span class="string">'frontier-engineer'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> modOneMutation = &#123;</span><br><span class="line">  SET_STATE(state: <span class="keyword">typeof</span> modOneState, obj: Partial&lt;<span class="keyword">typeof</span> modOneState&gt;) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      <span class="keyword">if</span> (isOwnKey(key, obj)) &#123;</span><br><span class="line">        state[key] = obj[key];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  SET_NAME(state: &#123; name: <span class="built_in">string</span> &#125;, v: <span class="built_in">string</span>) &#123;</span><br><span class="line">    state.name = v;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> modTwoState = &#123;</span><br><span class="line">  name: <span class="string">"q"</span>,</span><br><span class="line">  age: <span class="number">25</span>,</span><br><span class="line">  job: <span class="string">'back-end-engineer'</span>,</span><br><span class="line">  <span class="number">996</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> modTwoMutation = &#123;</span><br><span class="line">  SET_STATE(state: <span class="keyword">typeof</span> modTwoState, obj: Partial&lt;<span class="keyword">typeof</span> modTwoState&gt;) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      <span class="keyword">if</span> (isOwnKey(key, obj)) &#123;</span><br><span class="line">        state[key] = obj[key];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  SET_AGE(state: &#123; age: <span class="built_in">number</span> &#125;, v: <span class="built_in">number</span>) &#123;</span><br><span class="line">    state.age = v;</span><br><span class="line">  &#125;,</span><br><span class="line">  SET_996(state: &#123; <span class="number">996</span>: <span class="built_in">boolean</span> &#125;, v: <span class="built_in">boolean</span>) &#123;</span><br><span class="line">    state[<span class="number">996</span>] = v;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†vuex storeç‹¬ç«‹å‡ºæ¥</span></span><br><span class="line"><span class="keyword">const</span> storeOptions = &#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    SET_STATE(s: NonNeverState&lt;<span class="keyword">typeof</span> state&gt;, obj: Partial&lt;NonNeverState&lt;<span class="keyword">typeof</span> state&gt;&gt;) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOwnKey(key, obj)) &#123;</span><br><span class="line">          s[key] = obj[key];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    SET_NAME(s: NonNeverState&lt;<span class="keyword">typeof</span> state&gt;, v: <span class="built_in">string</span>) &#123;</span><br><span class="line">      s.name = v;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    SET_ASYNC_STATE(&#123; commit &#125;: &#123; commit: Commit &#125;, obj: Partial&lt;NonNeverState&lt;<span class="keyword">typeof</span> state&gt;&gt;) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">          commit(<span class="string">"SET_STATE"</span>, obj);</span><br><span class="line">          resolve(obj);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  modules: &#123;</span><br><span class="line">    modOne: &#123;</span><br><span class="line">      namespaced: <span class="literal">true</span>,</span><br><span class="line">      state: modOneState,</span><br><span class="line">      mutations: modOneMutation,</span><br><span class="line">      actions: &#123;</span><br><span class="line">        SET_ASYNC_NAME(&#123; commit &#125;: &#123; commit: Commit &#125;, name: <span class="built_in">string</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span> &#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">              commit(<span class="string">"modOne/SET_NAME"</span>, name);</span><br><span class="line">              resolve(name);</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      modules: &#123;</span><br><span class="line">        modOneSon: &#123;</span><br><span class="line">          namespaced: <span class="literal">true</span>,</span><br><span class="line">          state: &#123;</span><br><span class="line">            jk: <span class="literal">true</span></span><br><span class="line">          &#125;,</span><br><span class="line">          mutations: &#123;</span><br><span class="line">            SET_JK(state: &#123; jk: <span class="built_in">boolean</span> &#125;, v: <span class="built_in">boolean</span>) &#123;</span><br><span class="line">              state.jk = v;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          actions: &#123;</span><br><span class="line">            SET_ASYNC_JK(&#123; commit &#125;: &#123; commit: Commit &#125;, v: <span class="built_in">boolean</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span> &#123;</span><br><span class="line">                setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">                  commit(<span class="string">"modOne/modOneSon/SET_JK"</span>, v);</span><br><span class="line">                  resolve(v);</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          modules: &#123;</span><br><span class="line">            modOneSonSon: &#123;</span><br><span class="line">              namespaced: <span class="literal">true</span>,</span><br><span class="line">              state: &#123;</span><br><span class="line">                kpi: <span class="literal">true</span></span><br><span class="line">              &#125;,</span><br><span class="line">              mutations: &#123;</span><br><span class="line">                SET_KPI(state: &#123; kpi: <span class="built_in">boolean</span> &#125;, v: <span class="built_in">boolean</span>) &#123;</span><br><span class="line">                  state.kpi = v;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              actions: &#123;</span><br><span class="line">                SET_ASYNC_KPI(&#123; commit &#125;: &#123; commit: Commit &#125;, v: <span class="built_in">boolean</span>) &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span> &#123;</span><br><span class="line">                    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">                      commit(<span class="string">"modOne/modOneSon/modOneSonSon/SET_KPI"</span>, v);</span><br><span class="line">                      resolve(v);</span><br><span class="line">                    &#125;);</span><br><span class="line">                  &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    modTwo: &#123;</span><br><span class="line">      namespaced: <span class="literal">true</span>,</span><br><span class="line">      state: modTwoState,</span><br><span class="line">      mutations: modTwoMutation,</span><br><span class="line">      actions: &#123;</span><br><span class="line">        SET_ASYNC_AGE(&#123; commit &#125;: &#123; commit: Commit &#125;, v: <span class="built_in">number</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span> &#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">              commit(<span class="string">"modTwo/SET_AGE"</span>, v);</span><br><span class="line">              resolve(v);</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        SET_ASYNC_996(&#123; commit &#125;: &#123; commit: Commit &#125;, v: <span class="built_in">boolean</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span> &#123;</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">              commit(<span class="string">"modTwo/SET_996"</span>, v);</span><br><span class="line">              resolve(v);</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> TState = NonNeverState&lt;GetState&lt;<span class="keyword">typeof</span> storeOptions&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> TMutation = GetMutationKeyParamMap&lt;<span class="keyword">typeof</span> storeOptions&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> TAction = GetActionKeyParamMap&lt;<span class="keyword">typeof</span> storeOptions&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store&lt;TState&gt;(storeOptions);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>
<h1 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h1><p>åˆ©ç”¨å·¥ä½œé—´éš™æ–­æ–­ç»­ç»­å†™äº†ä¸¤ä¸‰å‘¨æ—¶é—´ï¼Œä¸­é—´ä¹Ÿå‡ºç°å› ä¸ºéš”äº†å¾ˆé•¿æ—¶é—´æ²¡å†™éƒ½å¿˜è®°ä¸Šæ¬¡æƒ³åˆ°å“ªå„¿äº†XDï¼Œç¡®å®é‡åˆ°äº†å‡ ä¸ªé—®é¢˜ï¼Œä»¥ä¸‹ç”±æ˜“åˆ°éš¾ï¼š</p>
<h2 id="æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥"></a>æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥</h2><p>å› ä¸ºè¦å®ç°<code>modules</code>åµŒå¥—å<code>mutation</code>ä¸`actionä»¥â€/â€œä¸ºåˆ†éš”çš„å‘½åç©ºé—´ï¼Œå¿…é¡»è¦ç”¨ä¸ŠTS4.1å‡ºçš„æ¨¡æ¿å­—ç¬¦ä¸²æ–°ç‰¹æ€§ï¼š<a href="https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html" target="_blank" rel="noopener">https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html</a>. </p>
<p>æœ¬è´¨ä¸Šè¿™å°±æ˜¯jsé‡Œçš„æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¸è¿‡æˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯ä¼ å…¥çš„èŒƒå‹æ‰”åˆ°å­—ç¬¦ä¸²æ‹¼æ¥typeåä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰keyçš„ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> KeyType = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"><span class="comment">// æ‹¼æ¥key</span></span><br><span class="line"><span class="keyword">type</span> AddPrefix&lt;Prefix <span class="keyword">extends</span> KeyType, Keys <span class="keyword">extends</span> KeyType&gt; = <span class="string">`<span class="subst">$&#123;Prefix&#125;</span>/<span class="subst">$&#123;Keys&#125;</span>`</span>;</span><br><span class="line"><span class="comment">// ä½¿ç”¨é‡åˆ°é—®é¢˜</span></span><br><span class="line"><span class="keyword">type</span> AddPrefixKeys&lt;P, S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = GetValue&lt;&#123;</span><br><span class="line">  [K <span class="keyword">in</span> S]: P <span class="keyword">extends</span> <span class="string">""</span> ? K : AddPrefix&lt;P, K&gt;;</span><br><span class="line">&#125;&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡ŒPä¼šæŠ¥é”™ï¼š<strong>ç±»å‹â€œPâ€ä¸æ»¡è¶³çº¦æŸâ€œKeyTypeâ€</strong>ã€‚å®é™…ä¸ŠæŠŠèŒƒå‹Pé‚£å„¿æ”¹æˆ<code>P extends KeyType</code>å°±å¯ä»¥äº†ï¼Œä½†æ˜¯åœ¨ä¸€äº›ä½¿ç”¨åœºæ™¯ä¸‹ä½ æ‹¿åˆ°å¹¶è¯•å›¾ä¼ å…¥çš„å¹¶ä¸ä¸€å®šèƒ½å°†ç±»å‹ç¼©çª„åˆ°<code>KeyType</code>ï¼Œæ‰€ä»¥è‡ªå·±å†™äº†ä¸ªæ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Revert2Key&lt;T&gt; = T <span class="keyword">extends</span> KeyType ? T : KeyType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> AddPrefixKeys&lt;P, S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = GetValue&lt;&#123;</span><br><span class="line">  [K <span class="keyword">in</span> S]: P <span class="keyword">extends</span> <span class="string">""</span> ? K : AddPrefix&lt;Revert2Key&lt;P&gt;, K&gt;;</span><br><span class="line">&#125;&gt;</span><br></pre></td></tr></table></figure>
<p>ä½†åé¢å‘ç°å…¶å®è¿˜å¯ä»¥ç”¨äº¤å‰ç±»å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> AddPrefixKeys&lt;P, S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = GetValue&lt;&#123;</span><br><span class="line">  [K <span class="keyword">in</span> S]: P <span class="keyword">extends</span> <span class="string">""</span> ? K : AddPrefix&lt;P &amp; <span class="built_in">string</span>, K&gt;;</span><br><span class="line">&#125;&gt;</span><br></pre></td></tr></table></figure>
<p>å¾ˆæ˜æ˜¾ï¼Œç¬¬äºŒç§æ–¹å¼æ›´ä¼˜é›…ã€‚</p>
<h2 id="ä½¿ç”¨è€…å®šä¹‰stateæ—¶ï¼Œå‡ºç°neverç±»å‹å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#ä½¿ç”¨è€…å®šä¹‰stateæ—¶ï¼Œå‡ºç°neverç±»å‹å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="ä½¿ç”¨è€…å®šä¹‰stateæ—¶ï¼Œå‡ºç°neverç±»å‹å¦‚ä½•è§£å†³ï¼Ÿ"></a>ä½¿ç”¨è€…å®šä¹‰stateæ—¶ï¼Œå‡ºç°neverç±»å‹å¦‚ä½•è§£å†³ï¼Ÿ</h2><p>å…¶å®å½“æˆ‘ä»¬ç»™ä¸€ä¸ªstateå…¶ä¸­ä¸€ä¸ªå˜é‡èµ‹åˆå§‹å€¼ä¸º[]æ—¶ï¼Œå®ƒçš„ç±»å‹å°±ä¼šè¢«è‡ªåŠ¨æ¨æ–­ä¸º<code>never[]</code>ã€‚æˆ‘å†™äº†ä¸€ä¸ªå·¥å…·æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> DealNeverType&lt;T&gt; = T <span class="keyword">extends</span> never ? <span class="built_in">any</span> : T <span class="keyword">extends</span> never[] ? <span class="built_in">any</span>[] : T;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> NonNeverState&lt;R <span class="keyword">extends</span> object&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof R]: R[K] <span class="keyword">extends</span> (<span class="built_in">any</span>[] | never) ? </span><br><span class="line">  DealNeverType&lt;R[K]&gt; : (R[K] <span class="keyword">extends</span> object ? </span><br><span class="line">  NonNeverState&lt;R[K]&gt; : DealNeverType&lt;R[K]&gt;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå¼€å§‹æˆ‘å†™çš„ç‰ˆæœ¬ï¼Œè¿™å…¶ä¸­æœ‰ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼ŒåŸå› æ˜¯æˆ‘æ²¡æœ‰ç†è§£neverè¿™ä¸ªç‰¹æ®Šç±»å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> CheckNever&lt;T&gt; = T <span class="keyword">extends</span> never ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// ç»“æœå¹¶ä¸æ˜¯æƒ³è±¡é‚£æ ·</span></span><br><span class="line"><span class="keyword">type</span> Test = CheckNever&lt;never&gt;; <span class="comment">// never</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œneveræ˜¯æ‰€æœ‰ç±»å‹çš„subTypeï¼Œè¿™é‡Œåªéšä¾¿ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Test2 = never <span class="keyword">extends</span> symbol ? <span class="literal">true</span> : <span class="literal">false</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>å¾ˆå¿«ï¼Œæˆ‘åœ¨Typescriptçš„ä»“åº“æ‰¾åˆ°äº†ç­”æ¡ˆï¼š<a href="https://github.com/microsoft/TypeScript/issues/23182ã€‚" target="_blank" rel="noopener">https://github.com/microsoft/TypeScript/issues/23182ã€‚</a></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> DealNeverType&lt;T&gt; = [T] <span class="keyword">extends</span> [never] ? <span class="built_in">any</span> : ([T] <span class="keyword">extends</span> [never[]] ? <span class="built_in">any</span>[] : T);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> NonNeverState&lt;R <span class="keyword">extends</span> object&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof R]: R[K] <span class="keyword">extends</span> (<span class="built_in">any</span>[] | never) ? </span><br><span class="line">  DealNeverType&lt;R[K]&gt; : (R[K] <span class="keyword">extends</span> object ? </span><br><span class="line">  NonNeverState&lt;R[K]&gt; : DealNeverType&lt;R[K]&gt;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ¡ˆå°±æ˜¯è®©ä»–ä»¬å˜æˆå…ƒç¥–ã€‚</p>
<h2 id="å½“Storeæ ‘æœ‰Nå±‚modulesï¼Œå¦‚ä½•è·å–æ‰€æœ‰çš„keyï¼Ÿ"><a href="#å½“Storeæ ‘æœ‰Nå±‚modulesï¼Œå¦‚ä½•è·å–æ‰€æœ‰çš„keyï¼Ÿ" class="headerlink" title="å½“Storeæ ‘æœ‰Nå±‚modulesï¼Œå¦‚ä½•è·å–æ‰€æœ‰çš„keyï¼Ÿ"></a>å½“Storeæ ‘æœ‰Nå±‚modulesï¼Œå¦‚ä½•è·å–æ‰€æœ‰çš„keyï¼Ÿ</h2><p>è€å®è¯´è¿™ä¸ªå…¶å®æ˜¯æœ€ç®€å•çš„é—®é¢˜ï¼Œä¸è¿‡æˆ‘ä¸­é—´èµ°äº†ä¸€æ¬¡å¼¯è·¯ï¼Œè¿˜æ˜¯æŠŠå®ƒè€è€å®å®å†™å‡ºæ¥å§ï¼</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// åˆ¤æ–­æ˜¯å¦æ·»åŠ /</span></span><br><span class="line"><span class="keyword">type</span> AddSlashe&lt;T&gt; = T <span class="keyword">extends</span> <span class="string">""</span> ? T : <span class="string">`<span class="subst">$&#123;T &amp; <span class="built_in">string</span>&#125;</span>/`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> GetMutationKeys&lt;N <span class="keyword">extends</span> ModuleStoreOptions, Prefix = <span class="string">""</span>&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof N]: N[K] <span class="keyword">extends</span> &#123; modules: ModuleStoreOptions &#125; ? </span><br><span class="line">  (</span><br><span class="line">    AddPrefix&lt;<span class="string">`<span class="subst">$&#123;AddSlashe&lt;Prefix&gt;&#125;</span><span class="subst">$&#123;K &amp; <span class="built_in">string</span>&#125;</span>`</span> , keyof N[K][<span class="string">"mutations"</span>] &amp; <span class="built_in">string</span>&gt; | </span><br><span class="line">    GetMutationKeys&lt;N[K][<span class="string">"modules"</span>], <span class="string">`<span class="subst">$&#123;AddSlashe&lt;Prefix&gt;&#125;</span><span class="subst">$&#123;K &amp; <span class="built_in">string</span>&#125;</span>`</span>&gt;</span><br><span class="line">  ) : </span><br><span class="line">  AddPrefix&lt;<span class="string">`<span class="subst">$&#123;AddSlashe&lt;Prefix&gt;&#125;</span><span class="subst">$&#123;K &amp; <span class="built_in">string</span>&#125;</span>`</span>, keyof N[K][<span class="string">"mutations"</span>] &amp; <span class="built_in">string</span>&gt;; </span><br><span class="line">&#125;[keyof N];</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡åˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦æœ‰<code>modules</code>æ¥å†³å®šæ˜¯å¦èµ°é€’å½’ä¸‰å…ƒåˆ†æ”¯</p>
<p><img src="/BeCoderQ.github.io/2021/07/19/å®ç°Vuexæœ€ç²¾å‡†çš„ç±»å‹æ¨æ–­Betaç‰ˆ/infer-1.png" alt="å›¾"></p>
<p>å¯ä»¥çœ‹åˆ°ç±»å‹ç¡®å®æ¨æ–­å‡ºæ¥äº†ï¼Œæ˜¯é‚£ä¹ˆå›äº‹ï¼Œä¸è¿‡æˆ‘å‘ç°è¿™ä¸ªæ–¹æ³•è¡Œä¸é€šï¼š</p>
<ul>
<li>è¿™æ ·åªèƒ½æ‹¿åˆ°mutationsæˆ–è€…actionsçš„keyï¼Œæˆ‘æ‹¿ä¸åˆ°å‚æ•°ï¼ˆå³commit(xxx, payload)å‡½æ•°çš„è¿™ä¸ªpayloadï¼‰ã€‚</li>
<li>è¿™æ ·æ‹¿ä¸åˆ°ç¬¬ä¸€å±‚stateï¼Œç”¨æˆ·è¦å•ç‹¬ä¼ å…¥modulesç±»å‹å†ä¸å¤–å±‚stateäº¤å‰ï¼Œå¾ˆéº»çƒ¦ã€‚</li>
</ul>
<p>ç¬¬äºŒä¸ªé—®é¢˜å¾ˆå¥½è§£å†³ï¼Œå…ˆä¸è°ˆï¼Œç¬¬ä¸€ä¸ªé—®é¢˜å°±è¦éš¾ä¸€ç‚¹ï¼šè¦å®ç°æœ¬æ–‡æœ€ä¸Šé¢çš„å›¾ç¤ºçš„æ•ˆæœï¼Œå°±å¿…é¡»è¦æŠŠmutationsçš„keyä¸å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°è”ç³»èµ·æ¥ã€‚</p>
<p>è¿™ä¹Ÿå°±å¼•å‡ºäº†ä¸‹ä¸€ä¸ªé—®é¢˜</p>
<h2 id="å¦‚ä½•å°†modulesåµŒå¥—çš„keyä¸å‡½æ•°å‚æ•°å¯¹åº”èµ·æ¥ï¼Ÿ"><a href="#å¦‚ä½•å°†modulesåµŒå¥—çš„keyä¸å‡½æ•°å‚æ•°å¯¹åº”èµ·æ¥ï¼Ÿ" class="headerlink" title="å¦‚ä½•å°†modulesåµŒå¥—çš„keyä¸å‡½æ•°å‚æ•°å¯¹åº”èµ·æ¥ï¼Ÿ"></a>å¦‚ä½•å°†modulesåµŒå¥—çš„keyä¸å‡½æ•°å‚æ•°å¯¹åº”èµ·æ¥ï¼Ÿ</h2><p>å®ç°è¿™ç‚¹å¤§ä½“è¦åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<h3 id="è·å–mutationsæˆ–actionsçš„payloadç±»å‹"><a href="#è·å–mutationsæˆ–actionsçš„payloadç±»å‹" class="headerlink" title="è·å–mutationsæˆ–actionsçš„payloadç±»å‹"></a>è·å–mutationsæˆ–actionsçš„payloadç±»å‹</h3><p>æƒ³å®ç°ä¸Šé¢çš„æ•ˆæœï¼Œ<code>infer</code>å…³é”®å­—å°±è¦å¤§æ˜¾ç¥å¨äº†ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªè·å–mutationæˆ–actionå‡½æ•°ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> GetSecondParamType&lt;M, MK <span class="keyword">extends</span> <span class="built_in">string</span>, K <span class="keyword">extends</span> <span class="built_in">string</span>, KEY = <span class="string">"mutations"</span>, E = never&gt; = M <span class="keyword">extends</span> &#123; </span><br><span class="line">  [X <span class="keyword">in</span> MK]: &#123; </span><br><span class="line">    [X1 <span class="keyword">in</span> KEY &amp; <span class="built_in">string</span>]: &#123; </span><br><span class="line">      [X2 <span class="keyword">in</span> K]: <span class="function">(<span class="params">s: <span class="built_in">any</span>, v: infer N</span>)=&gt;</span> <span class="built_in">any</span> </span><br><span class="line">    &#125; </span><br><span class="line">  &#125; </span><br><span class="line">&#125; ? N | E : never;</span><br></pre></td></tr></table></figure>
<p>çœ‹èµ·æ¥å¾ˆå¤´å¤§ï¼Œæ¢ä¸€ç§å†™æ³•çœ‹ç€ä¼šå¥½ä¸€ç‚¹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> XXX&lt;....&gt; = M <span class="keyword">extends</span> &#123;</span><br><span class="line">	mod: &#123;</span><br><span class="line">  	mutations: &#123;</span><br><span class="line">    	SET_NAME: <span class="function">(<span class="params">state: <span class="built_in">any</span>, value: <span class="built_in">any</span>[]</span>)=&gt;</span> <span class="built_in">any</span>     </span><br><span class="line">    &#125;      </span><br><span class="line">  &#125;         </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç±»å‹è½¬é—¨ç”¨äºæ¨æ–­vuexçš„moduleså†…çš„mutationsæˆ–actionsï¼ŒMæ˜¯æ¨¡å—ç±»å‹ï¼ŒMKæ˜¯è¦æ¨æ–­çš„æŒ‡å®šæ¨¡å—çš„keyï¼ŒKEYæ˜¯é€‰æ‹©mutationsè¿˜æ˜¯actionsï¼ŒKæ˜¯æŒ‡å®šè¦æ¨æ–­çš„mutationsæˆ–actionsçš„æŸä¸€ä¸ªå‡½æ•°ã€‚</p>
<h4 id="inferå…³é”®å­—"><a href="#inferå…³é”®å­—" class="headerlink" title="inferå…³é”®å­—"></a>inferå…³é”®å­—</h4><p>å¯ä»¥æŠŠinferç†è§£ä¸ºä¸€ä¸ªé™·é˜±(trap)ï¼Œä»¥TSå†…ç½®çš„ReturnTypeä¸ºä¾‹:</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ReturnType&lt;T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>) =&gt; infer R ? R : <span class="built_in">any</span>;</span><br></pre></td></tr></table></figure>
<p>å½“ä¼ å…¥å‡½æ•°æ—¶ï¼Œå°±ä¸€å®š<code>extends (...args: any)</code>ï¼Œé‚£ä¹ˆæŠŠ<code>infer R</code>æ”¾åˆ°å‡½æ•°è¿”å›å€¼çš„åœ°æ–¹ï¼Œå®ƒå°±ä¼šæ•è·åˆ°å‡½æ•°çš„è¿”å›ç±»å‹ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆè¦è®¾ç½®è¿™ä¹ˆå¤šèŒƒå‹å‚æ•°ï¼ŒåƒKç›´æ¥ä¼ å…¥keyof-mutationsä¸è¡Œå—ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦è®¾ç½®è¿™ä¹ˆå¤šèŒƒå‹å‚æ•°ï¼ŒåƒKç›´æ¥ä¼ å…¥keyof-mutationsä¸è¡Œå—ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦è®¾ç½®è¿™ä¹ˆå¤šèŒƒå‹å‚æ•°ï¼ŒåƒKç›´æ¥ä¼ å…¥keyof mutationsä¸è¡Œå—ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦è®¾ç½®è¿™ä¹ˆå¤šèŒƒå‹å‚æ•°ï¼ŒåƒKç›´æ¥ä¼ å…¥keyof mutationsä¸è¡Œå—ï¼Ÿ</h4><p>ç­”æ¡ˆæ˜¯ä¸è¡Œï¼Œç»§ç»­å¾€åçœ‹ï¼Œä½ ä¼šå‘ç°ç›´æ¥ä¼ å…¥keyof mutationsä¼šè®©ç»“æœå˜æˆ<strong>ä¸€å¯¹å¤š</strong>ã€‚</p>
<h4 id="è¿™é‡Œæœ€åä¸€ä¸ªèŒƒå‹å‚æ•°Eæ˜¯åšä»€ä¹ˆçš„"><a href="#è¿™é‡Œæœ€åä¸€ä¸ªèŒƒå‹å‚æ•°Eæ˜¯åšä»€ä¹ˆçš„" class="headerlink" title="è¿™é‡Œæœ€åä¸€ä¸ªèŒƒå‹å‚æ•°Eæ˜¯åšä»€ä¹ˆçš„"></a>è¿™é‡Œæœ€åä¸€ä¸ªèŒƒå‹å‚æ•°Eæ˜¯åšä»€ä¹ˆçš„</h4><p>è¿™ä¸ªEå¯ä»¥è®©æ‰€æœ‰æ¨æ–­çš„ç±»å‹æœ‰ä¸€ä¸ªè”åˆç±»å‹ï¼Œæ¯”å¦‚<code>null</code>ã€‚è¿™é‡Œè®¾ç½®åˆå§‹å€¼ä¸ºneveræ˜¯å› ä¸º<code>ä»»ä½•ç±»å‹ | never</code>éƒ½ä¼šå¾—åˆ°å…¶æœ¬èº«ï¼Œè¿™èƒ½å…¼å®¹ä¸ä¼ å…¥Eçš„æƒ…å†µã€‚</p>
<h3 id="é€’å½’å°†keyå’Œpayloadå¯¹åº”èµ·æ¥"><a href="#é€’å½’å°†keyå’Œpayloadå¯¹åº”èµ·æ¥" class="headerlink" title="é€’å½’å°†keyå’Œpayloadå¯¹åº”èµ·æ¥"></a>é€’å½’å°†keyå’Œpayloadå¯¹åº”èµ·æ¥</h3><p>åˆ°è¿™ä¸€æ­¥ä»£ç å°±æ˜¾å¾—éå¸¸å‡Œä¹±äº†ğŸ˜‚ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰é”®ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> KeyType = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨æ–­å‡ºå‚æ•°ç±»å‹ è¿”å›å…ƒç¥–</span></span><br><span class="line"><span class="keyword">type</span> ParamsType&lt;T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>[]) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (...args: infer R) =&gt; <span class="built_in">any</span> ? R : <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¯¹è±¡å€¼</span></span><br><span class="line"><span class="keyword">type</span> GetValue&lt;T&gt; = T[keyof T];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è”åˆç±»å‹è½¬äº¤å‰ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> UnionToIntersection&lt;U&gt; = </span><br><span class="line">  (U <span class="keyword">extends</span> <span class="built_in">any</span> ? <span class="function">(<span class="params">k: U</span>) =&gt;</span> <span class="built_in">void</span> : never) <span class="keyword">extends</span> (<span class="function">(<span class="params">k: infer I</span>) =&gt;</span> <span class="built_in">void</span>) ? I : never</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> AddPrefix&lt;Prefix <span class="keyword">extends</span> KeyType, Keys <span class="keyword">extends</span> KeyType&gt; = <span class="string">`<span class="subst">$&#123;Prefix&#125;</span>/<span class="subst">$&#123;Keys&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// åˆ¤æ–­æ˜¯å¦æ·»åŠ /</span></span><br><span class="line"><span class="keyword">type</span> AddSlashe&lt;T&gt; = T <span class="keyword">extends</span> <span class="string">""</span> ? T : <span class="string">`<span class="subst">$&#123;T &amp; <span class="built_in">string</span>&#125;</span>/`</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// æ”¯æŒè”åˆç±»å‹çš„å­—ç¬¦ä¸²æ¨¡æ¿æ‹¼æ¥ support string splicing of union type </span></span><br><span class="line"><span class="keyword">type</span> AddPrefixKeys&lt;P, S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = GetValue&lt;&#123;</span><br><span class="line">  [K <span class="keyword">in</span> S]: P <span class="keyword">extends</span> <span class="string">""</span> ? K : AddPrefix&lt;P &amp; <span class="built_in">string</span>, K&gt;;</span><br><span class="line">&#125;&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡å—Storeçš„ç±»å‹ï¼Œç”¨äºç»§æ‰¿åˆ¤æ–­ type of modules's store</span></span><br><span class="line"><span class="keyword">type</span> ModuleStoreOptions = &#123; </span><br><span class="line">  [k: <span class="built_in">string</span>]: &#123; </span><br><span class="line">    mutations: &#123; [x: <span class="built_in">string</span>]: <span class="function">(<span class="params">...args: <span class="built_in">any</span>[]</span>)=&gt;</span> <span class="built_in">any</span> &#125;; </span><br><span class="line">    state: <span class="built_in">any</span>; </span><br><span class="line">    actions?: &#123; [x: <span class="built_in">string</span>]: <span class="function">(<span class="params">...args: <span class="built_in">any</span>[]</span>)=&gt;</span> <span class="built_in">any</span> &#125;; </span><br><span class="line">    modules?: ModuleStoreOptions </span><br><span class="line">  &#125; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–mutationæˆ–actionå‡½æ•°ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹ get second param type of function which named K</span></span><br><span class="line"><span class="keyword">type</span> GetSecondParamType&lt;M, MK <span class="keyword">extends</span> <span class="built_in">string</span>, K <span class="keyword">extends</span> <span class="built_in">string</span>, KEY = <span class="string">"mutations"</span>, E = never&gt; = M <span class="keyword">extends</span> &#123; </span><br><span class="line">  [X <span class="keyword">in</span> MK]: &#123; </span><br><span class="line">    [X1 <span class="keyword">in</span> KEY &amp; <span class="built_in">string</span>]: &#123; </span><br><span class="line">      [X2 <span class="keyword">in</span> K]: <span class="function">(<span class="params">s: <span class="built_in">any</span>, v: infer N</span>)=&gt;</span> <span class="built_in">any</span> </span><br><span class="line">    &#125; </span><br><span class="line">  &#125; </span><br><span class="line">&#125; ? N | E : never;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> GetModuleMutationKeyParamMap&lt;M <span class="keyword">extends</span> ModuleStoreOptions, P = <span class="string">""</span>&gt; = UnionToIntersection&lt;GetValue&lt;&#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæ‹¿åˆ°ä¼ å…¥çš„æ¨¡å—Mçš„key å¦‚modOne</span></span><br><span class="line">  [R <span class="keyword">in</span> keyof M]:</span><br><span class="line">  	<span class="comment">// åˆ¤æ–­å†…éƒ¨æ˜¯å¦è¿˜æœ‰modulesï¼Œå¦‚modOne: &#123; modules: ... &#125;</span></span><br><span class="line">    M[R] <span class="keyword">extends</span> &#123; modules: ModuleStoreOptions &#125; ? </span><br><span class="line">    <span class="comment">// æ³¨æ„æˆ‘ä»¬éœ€è¦çš„åªæ˜¯å€¼ï¼Œè€Œä¸æ˜¯å¯¹è±¡ï¼Œå› æ­¤è¿™é‡Œéƒ½æ˜¯æ‹¿GetValueç±»å‹åŒ…ç€çš„ã€‚</span></span><br><span class="line">    GetValue&lt;&#123;</span><br><span class="line">      <span class="comment">// éå†M modulesä¸‹Rçš„mutations</span></span><br><span class="line">      [K <span class="keyword">in</span> keyof M[R][<span class="string">"mutations"</span>]]: &#123; </span><br><span class="line">        <span class="comment">// æœ€å è¿™é‡Œæ‰æ˜¯éå†keyï¼Œå¹¶å¯¹åº”payloadç±»å‹çš„åœ°æ–¹ï¼Œè¿™ä¹Ÿæ˜¯æœ€åè¾“å‡ºçš„ç»“æœ</span></span><br><span class="line">        [K1 <span class="keyword">in</span> AddPrefixKeys&lt;<span class="string">`<span class="subst">$&#123;AddSlashe&lt;P&gt;&#125;</span><span class="subst">$&#123;R &amp; <span class="built_in">string</span>&#125;</span>`</span>, K &amp; <span class="built_in">string</span>&gt;]: GetSecondParamType&lt;M, R &amp; <span class="built_in">string</span>, K &amp; <span class="built_in">string</span>&gt;</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;&gt; &amp; GetMutationKeyParamMap&lt;M[R][<span class="string">"modules"</span>], P <span class="keyword">extends</span> <span class="string">""</span> ? R : AddPrefix&lt;P &amp; <span class="built_in">string</span>, R &amp; <span class="built_in">string</span>&gt;&gt; : </span><br><span class="line">    GetValue&lt;&#123;</span><br><span class="line">      [K <span class="keyword">in</span> keyof M[R][<span class="string">"mutations"</span>]]: &#123;</span><br><span class="line">        [K1 <span class="keyword">in</span> AddPrefix&lt;<span class="string">`<span class="subst">$&#123;AddSlashe&lt;P&gt;&#125;</span><span class="subst">$&#123;R &amp; <span class="built_in">string</span>&#125;</span>`</span>, K &amp; <span class="built_in">string</span>&gt;]: GetSecondParamType&lt;M, R &amp; <span class="built_in">string</span>, K &amp; <span class="built_in">string</span>&gt;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;&gt;</span><br><span class="line">&#125;&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¯æŒç›´æ¥ä¼ å…¥æ•´ä¸ªvuex storeæ ‘ è§£æå‡ºmutationçš„keyä¸å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ç±»å‹</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> GetMutationKeyParamMap&lt;M <span class="keyword">extends</span> (ModuleStoreOptions | GetValue&lt;ModuleStoreOptions&gt;), P = <span class="string">""</span>&gt; = </span><br><span class="line">    M <span class="keyword">extends</span> ModuleStoreOptions ? </span><br><span class="line">    GetModuleMutationKeyParamMap&lt;M, P&gt; : </span><br><span class="line">    M <span class="keyword">extends</span> GetValue&lt;ModuleStoreOptions&gt; ? </span><br><span class="line">    (</span><br><span class="line">			<span class="comment">// å¯¹äºémodulesçš„ç¬¬ä¸€å±‚ï¼Œç›´æ¥æ¨å‡ºç±»å‹å°±è¡Œäº†</span></span><br><span class="line">      &#123; [K <span class="keyword">in</span> keyof M[<span class="string">"mutations"</span>]]: ParamsType&lt;M[<span class="string">"mutations"</span>][K &amp; <span class="built_in">string</span>]&gt;[<span class="number">1</span>] &#125; &amp;</span><br><span class="line">      (</span><br><span class="line">        M <span class="keyword">extends</span> &#123; modules: ModuleStoreOptions &#125; ? </span><br><span class="line">        GetModuleMutationKeyParamMap&lt;M[<span class="string">"modules"</span>]&gt; : </span><br><span class="line">        &#123;&#125;</span><br><span class="line">      )</span><br><span class="line">    ) : never;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šå¾€ä¸‹çœ‹ï¼Œå¤šäº†ä¸‰ä¸ªä¸œè¥¿ï¼š<code>GetValue</code>å’Œ<code>AddPrefixKeys</code>ä»¥åŠ<code>UnionToIntersection</code>ï¼Œå‰ä¸¤è€…å¾ˆå¥½ç†è§£ï¼Œå‰è€…æ˜¯è·å–å¯¹è±¡å€¼çš„ï¼Œåè€…æ˜¯æ‰©å±•äº†æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥ç±»å‹<code>AddPrefix</code>ï¼Œå¯ä»¥æ¥æ”¶è”åˆç±»å‹æ‹¼æ¥ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> AddPrefixKeys&lt;P, S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = GetValue&lt;&#123;</span><br><span class="line">  [K <span class="keyword">in</span> S]: P <span class="keyword">extends</span> <span class="string">""</span> ? K : AddPrefix&lt;P &amp; <span class="built_in">string</span>, K&gt;;</span><br><span class="line">&#125;&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Test = AddPrefixKeys&lt;<span class="string">"vwt"</span>, <span class="string">"1"</span> | <span class="string">"2"</span> | <span class="string">"3"</span>&gt;; <span class="comment">// "vwt/1 | vwt/2 | vwt/3"</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰ä¸ª<code>UnionToIntersection</code>ï¼Œå…¶å®æ˜¯ç”¨æ¥æŠŠè”åˆç±»å‹è½¬ä¸ºäº¤å‰ç±»å‹çš„ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> A = &#123; name: <span class="built_in">string</span> &#125; | &#123; age: <span class="built_in">number</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> Intersection = UnionToIntersection&lt;A&gt;; <span class="comment">// &#123; name: string; age: number &#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>æ¨æ–­keyå’Œparamå¯¹åº”çš„è¿‡ç¨‹ä¸ä»…è¦æ¨å‡ºä»–ä»¬çš„ç±»å‹ï¼Œè¿˜è¦è®©ç»“æ„æ‰å¹³åŒ–</strong>ã€‚</p>
<h4 id="GetModuleMutationKeyParamMapç±»å‹"><a href="#GetModuleMutationKeyParamMapç±»å‹" class="headerlink" title="GetModuleMutationKeyParamMapç±»å‹"></a>GetModuleMutationKeyParamMapç±»å‹</h4><p>è¿™ä¸ªç±»å‹ç”¨äºæ¨æ–­moduleså†…çš„mutationç±»å‹ï¼Œæ¨æ–­ç»“æœä¼šæ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  SET_NAME: <span class="built_in">string</span>;</span><br><span class="line">  modOne/SET_STATE: Partial&lt;<span class="keyword">typeof</span> modOneState&gt;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åšäº†ä¸‰ä¸ªå·¥ä½œï¼š</p>
<ul>
<li>ä½¿ç”¨é€’å½’ä¸äº¤å‰ç±»å‹æŠŠåµŒå¥—modulesä¸­åŸæœ¬æ ‘å½¢ç»“æ„çš„mutationæ‰å¹³åŒ–ï¼ˆUnionToIntersectionï¼‰</li>
<li>åˆ©ç”¨å¤šå±‚å¯¹è±¡éå†(å°±æ˜¯é‚£å †xxx in keyof)ä¿è¯<code>GetSecondParamType</code>æ‹¿åˆ°çš„mutationså‡½æ•°çš„KEYä¸æ˜¯è”åˆç±»å‹</li>
<li>åŒæ ·æ˜¯åˆ©ç”¨é€’å½’ï¼ŒæŠŠä¸Šä¸€è½®çš„åµŒå¥—ç»“æœPä¼ å…¥ä¸‹ä¸€è½®ï¼Œå®ç°mod/modOne/modOneSonè¿™æ ·çš„æ•ˆæœ</li>
</ul>
<h4 id="GetMutationKeyParamMapç±»å‹"><a href="#GetMutationKeyParamMapç±»å‹" class="headerlink" title="GetMutationKeyParamMapç±»å‹"></a>GetMutationKeyParamMapç±»å‹</h4><p>è¿™ä¸ªç±»å‹å°±æ²¡é‚£ä¹ˆå¤æ‚äº†ï¼Œå°±æ˜¯åˆ¤æ–­ç”¨æˆ·ä¼ å…¥çš„ç±»å‹æ˜¯æ•´ä¸ªVuex storeè¿˜æ˜¯åªç©¿äº†modulesçš„ç±»å‹ï¼Œä½œä¸ºä¸€ä¸ªå…¼å®¹ä¸¤è€…çš„ç±»å‹æš´éœ²å‡ºå»ã€‚</p>
<p>actionsçš„è·å–è¿‡ç¨‹å’Œmutationsçš„åŸºæœ¬å°±æ˜¯ä¸€æ ·çš„ï¼Œå°±å˜äº†ä¸ªkeyçš„åå­—ï¼Œå°±ä¸å•ç‹¬å†™å‡ºæ¥äº†</p>
<h1 id="è§£å†³æœ€åä¸€ä¸ªéº»çƒ¦"><a href="#è§£å†³æœ€åä¸€ä¸ªéº»çƒ¦" class="headerlink" title="è§£å†³æœ€åä¸€ä¸ªéº»çƒ¦"></a>è§£å†³æœ€åä¸€ä¸ªéº»çƒ¦</h1><p>åˆ°è¿™é‡Œå…¶å®è¿˜æœ‰ä¸ªæœ€é‡è¦çš„é—®é¢˜è¿˜æ²¡æœ‰è§£å†³ï¼Œé‚£å°±æ˜¯å£°æ˜åˆå¹¶çš„é—®é¢˜ï¼Œåœ¨vuexçš„å®˜æ–¹å£°æ˜æ–‡ä»¶<code>vue.d.ts</code>ä¸­ï¼Œæœ‰è¿™ä¹ˆå‡ è¡Œä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> "vue/types/vue" &#123;</span><br><span class="line">  <span class="keyword">interface</span> Vue &#123;</span><br><span class="line">    $store: Store&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>vuexå®˜æ–¹å£°æ˜äº†$storeå¯¹è±¡ï¼Œä½†ç»™äº†ä¸ªanyç±»å‹ï¼Œè¿™ä¹Ÿå¯¼è‡´åç»­å£°æ˜åˆå¹¶éƒ½æ— æ•ˆï¼Œæœ€å¤šä¹Ÿå°±åˆå¹¶ä¸‹Commitè¿™äº›ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥ç”¨nodeç¨‹åºæŠŠè¿™ä¸ªä»£ç åˆ æ‰äº†hhhã€‚</p>
<p>ä¹‹ååˆ›å»ºä¸€ä¸ªå£°æ˜æ–‡ä»¶ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; CommitOptions, DispatchOptions, Payload, Store &#125; <span class="keyword">from</span> <span class="string">"vuex"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; TAction, TMutation, TState &#125; <span class="keyword">from</span> <span class="string">"@/store"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TupleTypeToUnions&lt;T, K = <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> <span class="built_in">Array</span>&lt;K&gt; ? T[<span class="built_in">number</span>] : T</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤æŒ‡å®škeyï¼Œå¯æ¥å—å…ƒç¥–</span></span><br><span class="line"><span class="keyword">type</span> ExcludeKey&lt;T, U&gt; = T <span class="keyword">extends</span> (U <span class="keyword">extends</span> <span class="built_in">Array</span>&lt;<span class="built_in">any</span>&gt; ? TupleTypeToUnions&lt;U&gt; : U) ? never : T;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤stateä¸commitã€dispatch æ–¹ä¾¿åç»­é‡å†™ </span></span><br><span class="line"><span class="keyword">type</span> CutStore = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> ExcludeKey&lt;keyof Store&lt;<span class="built_in">any</span>&gt;, [<span class="string">"state"</span>, <span class="string">"commit"</span>, <span class="string">"dispatch"</span>]&gt;]: Store&lt;<span class="built_in">any</span>&gt;[K];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> "vue/types/vue" &#123;</span><br><span class="line">  <span class="keyword">interface</span> Vue &#123;</span><br><span class="line">    $store: CutStore &amp; &#123;</span><br><span class="line">      commit: &#123;</span><br><span class="line">        &lt;R <span class="keyword">extends</span> keyof TMutation&gt;(</span><br><span class="line">          <span class="keyword">type</span>: R,</span><br><span class="line">          payload?: TMutation[R],</span><br><span class="line">          options?: CommitOptions</span><br><span class="line">        ): <span class="built_in">void</span>;</span><br><span class="line">        &lt;P <span class="keyword">extends</span> Payload&gt;(payloadWithType: P, options?: CommitOptions): <span class="built_in">void</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125; &amp; &#123;</span><br><span class="line">      dispatch: &#123;</span><br><span class="line">        &lt;R <span class="keyword">extends</span> keyof TAction&gt;(</span><br><span class="line">          <span class="keyword">type</span>: R,</span><br><span class="line">          payload?: TAction[R],</span><br><span class="line">          options?: DispatchOptions</span><br><span class="line">        ): <span class="built_in">void</span>;</span><br><span class="line">        &lt;P <span class="keyword">extends</span> Payload&gt;(payloadWithType: P, options?: DispatchOptions): <span class="built_in">Promise</span>&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; &amp; &#123;</span><br><span class="line">      state: TState;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> "vuex/types/index" &#123;</span><br><span class="line">  <span class="keyword">interface</span> Commit &#123;</span><br><span class="line">    &lt;K <span class="keyword">extends</span> keyof TMutation&gt;(</span><br><span class="line">      <span class="keyword">type</span>: K,</span><br><span class="line">      payload?: TMutation[K],</span><br><span class="line">      options?: CommitOptions</span><br><span class="line">    ): <span class="built_in">void</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">interface</span> Dispatch &#123;</span><br><span class="line">    &lt;K <span class="keyword">extends</span> keyof TAction&gt;(</span><br><span class="line">      <span class="keyword">type</span>: K,</span><br><span class="line">      payload?: TAction[K],</span><br><span class="line">      options?: DispatchOptions</span><br><span class="line">    ): <span class="built_in">Promise</span>&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ç®—æ˜¯å®Œå·¥äº†ã€‚</p>
<h1 id="å·¥å…·å®Œæ•´ä»£ç "><a href="#å·¥å…·å®Œæ•´ä»£ç " class="headerlink" title="å·¥å…·å®Œæ•´ä»£ç "></a>å·¥å…·å®Œæ•´ä»£ç </h1><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> UnionToIntersection&lt;U&gt; = </span><br><span class="line">  (U <span class="keyword">extends</span> <span class="built_in">any</span> ? <span class="function">(<span class="params">k: U</span>) =&gt;</span> <span class="built_in">void</span> : never) <span class="keyword">extends</span> (<span class="function">(<span class="params">k: infer I</span>) =&gt;</span> <span class="built_in">void</span>) ? I : never</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨æ–­å‡ºå‡½æ•°çš„å‚æ•°ç±»å‹ infer param type of function</span></span><br><span class="line"><span class="keyword">type</span> ParamsType&lt;T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>[]) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (...args: infer R) =&gt; <span class="built_in">any</span> ? R : <span class="built_in">any</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * neveræ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹ï¼Œæ¯”å¦‚ä½ è®© any extends never ? 1 : 2ï¼Œè¿™ä¸ªç»“æœä¼šæ˜¯1 | 2ï¼Œå¦å¤–ï¼Œnever extends never[]æ˜¯true</span></span><br><span class="line"><span class="comment"> * è§£å†³è¿™äº›ç‰¹æ®Šæƒ…å†µå¯ä»¥æŠŠå®ƒè½¬ä¸ºå…ƒç¥–ç±»å‹åè¿›è¡Œå¯¹æ¯” </span></span><br><span class="line"><span class="comment"> * to prevent T being distributive, wrap it with []</span></span><br><span class="line"><span class="comment"> * ref. https://github.com/microsoft/TypeScript/issues/23182</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> DealNeverType&lt;T&gt; = [T] <span class="keyword">extends</span> [never] ? <span class="built_in">any</span> : ([T] <span class="keyword">extends</span> [never[]] ? <span class="built_in">any</span>[] : T);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * state =  &#123;</span></span><br><span class="line"><span class="comment"> *    arr: []</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> * è¿™ç§ä¼šè¢«æ¨æ–­ä¸ºnever[]</span></span><br><span class="line"><span class="comment"> * this one will be infered to never[]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> NonNeverState&lt;R <span class="keyword">extends</span> object&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof R]: R[K] <span class="keyword">extends</span> (<span class="built_in">any</span>[] | never) ? </span><br><span class="line">  DealNeverType&lt;R[K]&gt; : (R[K] <span class="keyword">extends</span> object ? </span><br><span class="line">  NonNeverState&lt;R[K]&gt; : DealNeverType&lt;R[K]&gt;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰é”®ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> KeyType = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å€¼ get value of an object</span></span><br><span class="line"><span class="keyword">type</span> GetValue&lt;T&gt; = T[keyof T];</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> AddPrefix&lt;Prefix <span class="keyword">extends</span> KeyType, Keys <span class="keyword">extends</span> KeyType&gt; = <span class="string">`<span class="subst">$&#123;Prefix&#125;</span>/<span class="subst">$&#123;Keys&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// åˆ¤æ–­æ˜¯å¦æ·»åŠ /</span></span><br><span class="line"><span class="keyword">type</span> AddSlashe&lt;T&gt; = T <span class="keyword">extends</span> <span class="string">""</span> ? T : <span class="string">`<span class="subst">$&#123;T &amp; <span class="built_in">string</span>&#125;</span>/`</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// æ”¯æŒè”åˆç±»å‹çš„å­—ç¬¦ä¸²æ¨¡æ¿æ‹¼æ¥ support string splicing of union type </span></span><br><span class="line"><span class="keyword">type</span> AddPrefixKeys&lt;P, S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = GetValue&lt;&#123;</span><br><span class="line">  [K <span class="keyword">in</span> S]: P <span class="keyword">extends</span> <span class="string">""</span> ? K : AddPrefix&lt;P &amp; <span class="built_in">string</span>, K&gt;;</span><br><span class="line">&#125;&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡å—Storeçš„ç±»å‹ï¼Œç”¨äºç»§æ‰¿åˆ¤æ–­ type of modules's store</span></span><br><span class="line"><span class="keyword">type</span> ModuleStoreOptions = &#123; </span><br><span class="line">  [k: <span class="built_in">string</span>]: &#123; </span><br><span class="line">    mutations: &#123; [x: <span class="built_in">string</span>]: <span class="function">(<span class="params">...args: <span class="built_in">any</span>[]</span>)=&gt;</span> <span class="built_in">any</span> &#125;; </span><br><span class="line">    state: <span class="built_in">any</span>; </span><br><span class="line">    actions?: &#123; [x: <span class="built_in">string</span>]: <span class="function">(<span class="params">...args: <span class="built_in">any</span>[]</span>)=&gt;</span> <span class="built_in">any</span> &#125;; </span><br><span class="line">    modules?: ModuleStoreOptions </span><br><span class="line">  &#125; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–mutationæˆ–actionå‡½æ•°ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹ get second param type of function which named K</span></span><br><span class="line"><span class="keyword">type</span> GetSecondParamType&lt;M, MK <span class="keyword">extends</span> <span class="built_in">string</span>, K <span class="keyword">extends</span> <span class="built_in">string</span>, KEY = <span class="string">"mutations"</span>, E = never&gt; = M <span class="keyword">extends</span> &#123; </span><br><span class="line">  [X <span class="keyword">in</span> MK]: &#123; </span><br><span class="line">    [X1 <span class="keyword">in</span> KEY &amp; <span class="built_in">string</span>]: &#123; </span><br><span class="line">      [X2 <span class="keyword">in</span> K]: <span class="function">(<span class="params">s: <span class="built_in">any</span>, v: infer N</span>)=&gt;</span> <span class="built_in">any</span> </span><br><span class="line">    &#125; </span><br><span class="line">  &#125; </span><br><span class="line">&#125; ? N | E : never;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–modulesä¸­çš„mutation keyä¸ç¬¬äºŒä¸ªå‚æ•°ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> GetModuleMutationKeyParamMap&lt;M <span class="keyword">extends</span> ModuleStoreOptions, P = <span class="string">""</span>&gt; = UnionToIntersection&lt;GetValue&lt;&#123;</span><br><span class="line">  [R <span class="keyword">in</span> keyof M]: </span><br><span class="line">    M[R] <span class="keyword">extends</span> &#123; modules: ModuleStoreOptions &#125; ? </span><br><span class="line">    GetValue&lt;&#123; </span><br><span class="line">      [K <span class="keyword">in</span> keyof M[R][<span class="string">"mutations"</span>]]: &#123;</span><br><span class="line">        [K1 <span class="keyword">in</span> AddPrefixKeys&lt;<span class="string">`<span class="subst">$&#123;AddSlashe&lt;P&gt;&#125;</span><span class="subst">$&#123;R &amp; <span class="built_in">string</span>&#125;</span>`</span>, K &amp; <span class="built_in">string</span>&gt;]: GetSecondParamType&lt;M, R &amp; <span class="built_in">string</span>, K &amp; <span class="built_in">string</span>&gt;</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;&gt; &amp; GetMutationKeyParamMap&lt;M[R][<span class="string">"modules"</span>], P <span class="keyword">extends</span> <span class="string">""</span> ? R : AddPrefix&lt;P &amp; <span class="built_in">string</span>, R &amp; <span class="built_in">string</span>&gt;&gt; : </span><br><span class="line">    GetValue&lt;&#123;</span><br><span class="line">      [K <span class="keyword">in</span> keyof M[R][<span class="string">"mutations"</span>]]: &#123;</span><br><span class="line">        [K1 <span class="keyword">in</span> AddPrefix&lt;<span class="string">`<span class="subst">$&#123;AddSlashe&lt;P&gt;&#125;</span><span class="subst">$&#123;R &amp; <span class="built_in">string</span>&#125;</span>`</span>, K &amp; <span class="built_in">string</span>&gt;]: GetSecondParamType&lt;M, R &amp; <span class="built_in">string</span>, K &amp; <span class="built_in">string</span>&gt;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;&gt;</span><br><span class="line">&#125;&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¯æŒç›´æ¥ä¼ å…¥æ•´ä¸ªvuex storeæ ‘ è§£æå‡ºmutationçš„keyä¸å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ç±»å‹</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> GetMutationKeyParamMap&lt;M <span class="keyword">extends</span> (ModuleStoreOptions | GetValue&lt;ModuleStoreOptions&gt;), P = <span class="string">""</span>&gt; = </span><br><span class="line">    M <span class="keyword">extends</span> ModuleStoreOptions ? </span><br><span class="line">    GetModuleMutationKeyParamMap&lt;M, P&gt; : </span><br><span class="line">    M <span class="keyword">extends</span> GetValue&lt;ModuleStoreOptions&gt; ? </span><br><span class="line">    (</span><br><span class="line">      &#123; [K <span class="keyword">in</span> keyof M[<span class="string">"mutations"</span>]]: ParamsType&lt;M[<span class="string">"mutations"</span>][K &amp; <span class="built_in">string</span>]&gt;[<span class="number">1</span>] &#125; &amp;</span><br><span class="line">      (</span><br><span class="line">        M <span class="keyword">extends</span> &#123; modules: ModuleStoreOptions &#125; ? </span><br><span class="line">        GetModuleMutationKeyParamMap&lt;M[<span class="string">"modules"</span>]&gt; : </span><br><span class="line">        &#123;&#125;</span><br><span class="line">      )</span><br><span class="line">    ) : never;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ¨¡å—ä¸‹çš„actionçš„keyä¸å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°map</span></span><br><span class="line"><span class="keyword">type</span> GetModuleActionKeyParamMap&lt;M <span class="keyword">extends</span> ModuleStoreOptions, P = <span class="string">""</span>&gt; = UnionToIntersection&lt;GetValue&lt;&#123;</span><br><span class="line">  [R <span class="keyword">in</span> keyof M]: </span><br><span class="line">    M[R] <span class="keyword">extends</span> &#123; modules: ModuleStoreOptions &#125; ? </span><br><span class="line">    GetValue&lt;&#123; </span><br><span class="line">      [K <span class="keyword">in</span> keyof M[R][<span class="string">"actions"</span>]]: &#123;</span><br><span class="line">        [K1 <span class="keyword">in</span> AddPrefixKeys&lt;<span class="string">`<span class="subst">$&#123;AddSlashe&lt;P&gt;&#125;</span><span class="subst">$&#123;R &amp; <span class="built_in">string</span>&#125;</span>`</span>, K &amp; <span class="built_in">string</span>&gt;]: GetSecondParamType&lt;M, R &amp; <span class="built_in">string</span>, K &amp; <span class="built_in">string</span>, <span class="string">"actions"</span>&gt;</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;&gt; &amp; GetActionKeyParamMap&lt;M[R][<span class="string">"modules"</span>], P <span class="keyword">extends</span> <span class="string">""</span> ? R : AddPrefix&lt;P &amp; <span class="built_in">string</span>, R &amp; <span class="built_in">string</span>&gt;&gt; : </span><br><span class="line">    GetValue&lt;&#123;</span><br><span class="line">      [K <span class="keyword">in</span> keyof M[R][<span class="string">"actions"</span>]]: &#123;</span><br><span class="line">        [K1 <span class="keyword">in</span> AddPrefix&lt;<span class="string">`<span class="subst">$&#123;AddSlashe&lt;P&gt;&#125;</span><span class="subst">$&#123;R &amp; <span class="built_in">string</span>&#125;</span>`</span>, K &amp; <span class="built_in">string</span>&gt;]: GetSecondParamType&lt;M, R &amp; <span class="built_in">string</span>, K &amp; <span class="built_in">string</span>, <span class="string">"actions"</span>&gt;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;&gt;</span><br><span class="line">&#125;&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¯æŒç›´æ¥ä¼ å…¥æ•´ä¸ªvuex storeæ ‘ è§£æå‡ºactionçš„keyä¸å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ç±»å‹</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> GetActionKeyParamMap&lt;M <span class="keyword">extends</span> (ModuleStoreOptions | GetValue&lt;ModuleStoreOptions&gt;), P = <span class="string">""</span>&gt; = </span><br><span class="line">    M <span class="keyword">extends</span> ModuleStoreOptions ? </span><br><span class="line">    GetModuleActionKeyParamMap&lt;M, P&gt; : </span><br><span class="line">    M <span class="keyword">extends</span> Required&lt;GetValue&lt;ModuleStoreOptions&gt;&gt; ? </span><br><span class="line">    (</span><br><span class="line">      &#123; [K <span class="keyword">in</span> keyof M[<span class="string">"actions"</span>]]: ParamsType&lt;M[<span class="string">"actions"</span>][K &amp; <span class="built_in">string</span>]&gt;[<span class="number">1</span>] &#125; &amp;</span><br><span class="line">      (</span><br><span class="line">        M <span class="keyword">extends</span> &#123; modules: ModuleStoreOptions &#125; ? </span><br><span class="line">        GetModuleActionKeyParamMap&lt;M[<span class="string">"modules"</span>]&gt; : </span><br><span class="line">        &#123;&#125;</span><br><span class="line">      )</span><br><span class="line">    ) : never;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡å—stateçš„ç±»å‹ ä¼šé€’å½’æ‹¿åˆ°åµŒå¥—æ¨¡å—çš„stateç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> GetSubState&lt;M <span class="keyword">extends</span> ModuleStoreOptions&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof M]?: M[K] <span class="keyword">extends</span> &#123; modules: ModuleStoreOptions &#125; ? </span><br><span class="line">    M[K][<span class="string">"state"</span>] &amp; GetSubState&lt;M[K][<span class="string">"modules"</span>]&gt; : </span><br><span class="line">    M[K][<span class="string">"state"</span>]</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ¹æ®ä¼ å…¥çš„vuex store è·å–state</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> GetState&lt;M <span class="keyword">extends</span> (ModuleStoreOptions | GetValue&lt;ModuleStoreOptions&gt;)&gt; = M <span class="keyword">extends</span> ModuleStoreOptions ? </span><br><span class="line">  GetSubState&lt;M&gt; : (</span><br><span class="line">    &#123; [K <span class="keyword">in</span> keyof M[<span class="string">"state"</span>]]: M[<span class="string">"state"</span>][K] &#125; &amp; (</span><br><span class="line">    M <span class="keyword">extends</span> &#123; modules: ModuleStoreOptions &#125; ? </span><br><span class="line">    GetState&lt;M[<span class="string">"modules"</span>]&gt; : </span><br><span class="line">    &#123;&#125;</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™ä¸ªæ–‡ç« ä¹Ÿæ˜¯æ–­æ–­ç»­ç»­å†™çš„ï¼Œå†™å®Œæ„Ÿè§‰ä¹±ä¸ƒå…«ç³Ÿã€‚ä»¥ä¸Šæ˜¯å¤§æ¦‚å®ç°ï¼Œå®é™…ä¸Šè¿˜æœ‰å‘æ²¡å¡«ï¼Œæ¯”å¦‚namespacedè®¾ç½®ä¸ºfalseçš„æ²¡æœ‰å•ç‹¬å¤„ç†ï¼Œåˆæ¯”å¦‚commitä¸dispatchåªæ”¯æŒäº†ä¸€ç§å†™æ³•ï¼Œå†æ¯”å¦‚è¦é€šè¿‡åˆ é™¤åº“æºç çš„ä¸€éƒ¨åˆ†æ‰èƒ½å®ç°ï¼ˆä¸è¿‡å¥½åœ¨tsåªæ˜¯å…ƒç¼–ç¨‹åŸºæœ¬ä¸æ¶‰åŠæ•°æ®é€»è¾‘ï¼‰ï¼Œå¦å¤–æ„Ÿè§‰å†™å¾—è¿‡äºå¤æ‚äº†ã€‚æœ€åçš„æœ€åï¼Œè¿™æ•´å¥—æˆ‘æœ‰æ•´åˆå‘å¸ƒåˆ°npmä¸Šï¼Œä½¿ç”¨<code>npm i vuex-with-type</code>å®‰è£…ï¼Œ<code>npx vwt init</code>ä½¿ç”¨ã€‚æ˜é‡‘å†™æ–‡ç« ï¼Œå‘npmåŒ…éƒ½æ˜¯ç¬¬ä¸€æ¬¡ï¼Œå¦‚æœæœ¬æ–‡æœ‰äººçœ‹ï¼Œå¸Œæœ›èƒ½ç•™ä¸‹è¯„è®ºæ‰¹è¯„æŒ‡ç‚¹ä¸€ä¸‹ã€‚</p>

                <hr>
                

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/BeCoderQ.github.io/2021/08/27/å®ç”¨è£…é¥°å™¨å›¾ï¼ˆç ï¼‰é‰´/" data-toggle="tooltip" data-placement="top"
                           title="ä¸šåŠ¡ä¸­çš„è£…é¥°å™¨å›¾ï¼ˆç ï¼‰é‰´">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/BeCoderQ.github.io/2021/06/02/è®°ä¸€æ¬¡Vuexä¸­commitç±»å‹æ ¡éªŒçš„è¿‡ç¨‹/" data-toggle="tooltip" data-placement="top"
                           title="è®°ä¸€æ¬¡Vuexä¸­commitç±»å‹æ ¡éªŒçš„è¿‡ç¨‹">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                

                


                <!--åŠ å…¥æ–°çš„è¯„è®ºç³»ç»Ÿ-->
                

                

            </div>

            <div class="hidden-xs col-sm-3 toc-col">
                <div class="toc-wrap">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#å’ŒVuexè€—ä¸Šäº†"><span class="toc-text">å’ŒVuexè€—ä¸Šäº†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#state"><span class="toc-text">state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#commit"><span class="toc-text">commit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dispatch"><span class="toc-text">dispatch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#store-index-tsæ–‡ä»¶"><span class="toc-text">store/index.tsæ–‡ä»¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#é‡åˆ°çš„é—®é¢˜"><span class="toc-text">é‡åˆ°çš„é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥"><span class="toc-text">æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä½¿ç”¨è€…å®šä¹‰stateæ—¶ï¼Œå‡ºç°neverç±»å‹å¦‚ä½•è§£å†³ï¼Ÿ"><span class="toc-text">ä½¿ç”¨è€…å®šä¹‰stateæ—¶ï¼Œå‡ºç°neverç±»å‹å¦‚ä½•è§£å†³ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å½“Storeæ ‘æœ‰Nå±‚modulesï¼Œå¦‚ä½•è·å–æ‰€æœ‰çš„keyï¼Ÿ"><span class="toc-text">å½“Storeæ ‘æœ‰Nå±‚modulesï¼Œå¦‚ä½•è·å–æ‰€æœ‰çš„keyï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¦‚ä½•å°†modulesåµŒå¥—çš„keyä¸å‡½æ•°å‚æ•°å¯¹åº”èµ·æ¥ï¼Ÿ"><span class="toc-text">å¦‚ä½•å°†modulesåµŒå¥—çš„keyä¸å‡½æ•°å‚æ•°å¯¹åº”èµ·æ¥ï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è·å–mutationsæˆ–actionsçš„payloadç±»å‹"><span class="toc-text">è·å–mutationsæˆ–actionsçš„payloadç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#inferå…³é”®å­—"><span class="toc-text">inferå…³é”®å­—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸ºä»€ä¹ˆè¦è®¾ç½®è¿™ä¹ˆå¤šèŒƒå‹å‚æ•°ï¼ŒåƒKç›´æ¥ä¼ å…¥keyof-mutationsä¸è¡Œå—ï¼Ÿ"><span class="toc-text">ä¸ºä»€ä¹ˆè¦è®¾ç½®è¿™ä¹ˆå¤šèŒƒå‹å‚æ•°ï¼ŒåƒKç›´æ¥ä¼ å…¥keyof mutationsä¸è¡Œå—ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è¿™é‡Œæœ€åä¸€ä¸ªèŒƒå‹å‚æ•°Eæ˜¯åšä»€ä¹ˆçš„"><span class="toc-text">è¿™é‡Œæœ€åä¸€ä¸ªèŒƒå‹å‚æ•°Eæ˜¯åšä»€ä¹ˆçš„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é€’å½’å°†keyå’Œpayloadå¯¹åº”èµ·æ¥"><span class="toc-text">é€’å½’å°†keyå’Œpayloadå¯¹åº”èµ·æ¥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#GetModuleMutationKeyParamMapç±»å‹"><span class="toc-text">GetModuleMutationKeyParamMapç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GetMutationKeyParamMapç±»å‹"><span class="toc-text">GetMutationKeyParamMapç±»å‹</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#è§£å†³æœ€åä¸€ä¸ªéº»çƒ¦"><span class="toc-text">è§£å†³æœ€åä¸€ä¸ªéº»çƒ¦</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å·¥å…·å®Œæ•´ä»£ç "><span class="toc-text">å·¥å…·å®Œæ•´ä»£ç </span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ€»ç»“"><span class="toc-text">æ€»ç»“</span></a></li></ol>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5 class="text-center">
                        <a href="/BeCoderQ.github.io/tags/">FEATURED TAGS</a>
                    </h5>
                    <div class="tags">
                        
                        <a class="tag" href="/BeCoderQ.github.io/tags/#typescript"
                           title="typescript">typescript</a>
                        
                        <a class="tag" href="/BeCoderQ.github.io/tags/#vuex"
                           title="vuex">vuex</a>
                        
                        <a class="tag" href="/BeCoderQ.github.io/tags/#å¼€æº"
                           title="å¼€æº">å¼€æº</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>

    </div>
</article>







<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <br>
                <ul class="list-inline text-center">
                
                
                    <li>
                        <a target="_blank" href="https://twitter.com/zyyzg">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/zhouqi">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">çŸ¥</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/St7Paul-">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/becoderq">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; ChowMe 2022
                    <br>
                    <span id="busuanzi_container_site_pv" style="font-size: 12px;">PV: <span id="busuanzi_value_site_pv"></span> Times</span>
                    <br>
                    Theme by <a href="https://haojen.github.io/">Haojen Ma</a>
                </p>

            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/BeCoderQ.github.io/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/BeCoderQ.github.io/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/BeCoderQ.github.io/js/blog.js"></script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://localhost:4000/BeCoderQ.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>



<!-- Google Analytics -->



<!-- Baidu Tongji -->

<script>
    var _baId = 'ac1ba4c0c5c675cde36fb506beabca37';
    // Originial
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?" + _baId;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


<!-- swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','','2.0.0');
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!--wechat title img-->
<img class="wechat-title-img" src="https://gitee.com/zyyzg/blog/images/eat.gif">
</body>

</html>
